(()=>{"use strict";const t=t=>document.getElementById(t),e=async t=>(await fetch(`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/pk9RMX2Es1GYRfVPhxJy/comments?item_id=${t}`,{})).text();async function n(n,i,a,s){const o=t("popwindow");function d(n){n.preventDefault();const i=t("_txt_name"),a=t("_txt_comment");(async(t,e,n)=>{const i=JSON.stringify({item_id:t,username:e,comment:n});return(await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/pk9RMX2Es1GYRfVPhxJy/comments/",{method:"POST",headers:{"Content-type":"application/json; Charset=UTF-8"},body:i})).text()})(s,i.value,a.value).then((()=>{e(s).then((e=>{i.value="",a.value="";const n=JSON.parse(e),s=t("_comments");s.innerHTML="",t("_comments_length").innerText=n.length,n.forEach((t=>{const e=document.createElement("template");e.innerHTML=`<li>\n            <span>${t.creation_date}</span>\n            <span>${t.username}: </span>\n            <span>${t.comment}</span>\n          </li>`,s.appendChild(e.content.firstChild)}))}))}))}t("modal-title-1").innerText=n,o.innerHTML=`<img src=${a} alt=${n}><div class="text-component">\n    <div class="padding-top-xs">\n      <p id="_m_description">${i}</p>\n    </div>\n  </div>`,e(s).then((e=>{const n=JSON.parse(e);if(void 0!==n.length){const e=t("_comments");e.innerHTML="",t("_comments_length").innerText=(t=>t.length)(n),n.forEach((t=>{const n=document.createElement("template");n.innerHTML=`<li>\n        <span>${t.creation_date}</span>\n        <span>${t.username}: </span>\n        <span>${t.comment}</span>\n      </li>`,e.appendChild(n.content.firstChild)}))}})),document.getElementById("_btn_comment").addEventListener("click",d),function(e,n){const i=document.getElementsByClassName("js-modal")[0],a=new CustomEvent("openModal");i.dispatchEvent(a),i.addEventListener("modalIsClose",(()=>{t("_btn_comment").removeEventListener("click",void t("_btn_comment").removeEventListener("click",d))}))}()}async function i(e){const n=await(async()=>(await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/pk9RMX2Es1GYRfVPhxJy/likes/",{})).text())(),i=JSON.parse(n).find((t=>t.item_id===e));t(e).innerText=`${i.likes} Like ( s )`}(async()=>{const t=await(async t=>{const e=await fetch("https://movies-tvshows-data-imdb.p.rapidapi.com/?type=get-popular-movies&page=1&year=2020",{method:"GET",headers:{"x-rapidapi-key":"646b9d635fmsh5798a4d83b59a18p1a2a7djsn49980f17b348","x-rapidapi-host":"movies-tvshows-data-imdb.p.rapidapi.com"}});return(await e.json()).movie_results.slice(0,12)})();var e;(function(t){const e=document.getElementById("moviesection"),a=document.getElementById("moviedropmenu");e.innerHTML="",t.forEach((t=>{(async()=>{const s=await(async t=>{const e=await fetch(`https://movies-tvshows-data-imdb.p.rapidapi.com/?type=get-movie-details&imdb=${t}`,{method:"GET",headers:{"x-rapidapi-key":"646b9d635fmsh5798a4d83b59a18p1a2a7djsn49980f17b348","x-rapidapi-host":"movies-tvshows-data-imdb.p.rapidapi.com"}});return(await e.json()).description})(t.imdb_id),o=await(async t=>{const e=await fetch(`https://movies-tvshows-data-imdb.p.rapidapi.com/?type=get-movies-images-by-imdb&imdb=${t}`,{method:"GET",headers:{"x-rapidapi-key":"646b9d635fmsh5798a4d83b59a18p1a2a7djsn49980f17b348","x-rapidapi-host":"movies-tvshows-data-imdb.p.rapidapi.com"}});return(await e.json()).poster})(t.imdb_id),d=document.createElement("div");d.className="col-4";const c=document.createElement("li"),m=document.createElement("button");m.className="btn btn--primary margin-right-md",m.innerText="Comments",m.addEventListener("click",(()=>{n(t.title,s,o,t.imdb_id)})),c.innerHTML=`<li><a href="#0" class="f-header__dropdown-link">${t.title}</a></li>`,a.appendChild(c),d.innerHTML=`<img src=${o} alt=${t.title}><br><div class='clearfix'><h6 class='float-left'>${t.title}</h6><i class='float-right'><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"/></svg></i></div><div><p id=${t.imdb_id}></p></div><br>`,d.querySelector("i").addEventListener("click",(async()=>{await(async t=>{const e=JSON.stringify({item_id:t});return(await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/pk9RMX2Es1GYRfVPhxJy/likes/",{method:"POST",headers:{"Content-type":"application/json; Charset=UTF-8"},body:e})).text()})(t.imdb_id),await i(t.imdb_id)})),d.append(m),e.appendChild(d),await i(t.imdb_id)})()}))})(t),e=function(t){return t.length}(t),document.getElementById("title").innerText=`Movies (${e})`})()})();